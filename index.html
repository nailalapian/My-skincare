<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naila's Absolute Glow ‚ú®</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #8e94f2;
            --accent: #ff9a9e;
            --water: #70a1ff;
            --bg: #f8f9fd;
            --text-main: #2d3436;
            --glass: rgba(255, 255, 255, 0.85);
        }

        body.dark-mode {
            --bg: #1a1a2e;
            --text-main: #e0e0e0;
            --glass: rgba(30, 30, 50, 0.85);
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; transition: 0.3s; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%);
            background-attachment: fixed;
            color: var(--text-main);
            margin: 0; padding: 15px; display: flex; justify-content: center;
        }

        .container { max-width: 480px; width: 100%; }

        header {
            text-align: center; padding: 30px 20px; background: var(--glass);
            backdrop-filter: blur(20px); border-radius: 35px; margin-bottom: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.05); border: 1px solid white;
        }

        #greeting { font-size: 1.1rem; font-weight: 800; color: var(--primary); margin-bottom: 5px; }
        header h1 { font-weight: 800; font-size: 1.8rem; margin: 0; color: var(--primary); }

        .dark-toggle { position: fixed; top: 20px; right: 20px; z-index: 1000; cursor: pointer; font-size: 1.5rem; background: none; border: none; }

        .smart-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .info-box { background: var(--glass); padding: 12px; border-radius: 20px; border: 1px solid white; font-size: 0.7rem; }
        .info-box b { display: block; color: var(--primary); text-transform: uppercase; margin-bottom: 4px; }

        .progress-box { margin-top: 20px; }
        .progress-bg { background: #eee; height: 12px; border-radius: 10px; overflow: hidden; }
        #progress-bar { width: 0%; height: 100%; background: var(--primary); transition: 0.8s; }

        /* CARDS */
        .widget-card { background: var(--glass); padding: 20px; border-radius: 25px; margin-bottom: 15px; border: 1px solid white; }
        input { padding: 10px; border-radius: 12px; border: 1px solid #ddd; font-family: inherit; font-size: 0.75rem; width: 100%; margin-bottom: 8px; }
        .btn-add { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; }
        
        .list-item { background: white; padding: 12px; border-radius: 15px; margin-top: 8px; font-size: 0.75rem; border: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; }
        .exp-tag { font-size: 0.6rem; font-weight: 800; padding: 2px 6px; border-radius: 5px; margin-top: 4px; display: inline-block; }
        .exp-alert { background: #ff7675; color: white; }
        .exp-ok { background: #55efc4; color: #00b894; }
        .del-btn { color: #ff7675; cursor: pointer; font-weight: 800; }

        /* CHECKLIST */
        .section-tag { font-weight: 800; font-size: 0.75rem; color: #7f8c8d; margin: 20px 0 10px 10px; display: block; }
        .card { background: var(--glass); border-radius: 28px; padding: 20px; margin-bottom: 18px; border: 1px solid white; }
        li { padding: 15px; margin-bottom: 10px; border-radius: 18px; background: white; cursor: pointer; border: 1px solid #f0f0f0; display: flex; align-items: center; list-style: none; }
        li.checked { background: #f0f3ff; opacity: 0.8; }
        li.checked span { text-decoration: line-through; color: #b2bec3; }
        .checkbox { width: 22px; height: 22px; border: 2px solid #ddd; border-radius: 8px; margin-right: 15px; flex-shrink: 0; position: relative;}
        li.checked .checkbox { background: var(--primary); border-color: var(--primary); }
        li.checked .checkbox::after { content: '‚úì'; color: white; position: absolute; left: 4px; top: -2px; }

        /* WATER INTAKE */
        .water-progress { height: 6px; background: #eee; border-radius: 10px; margin: 10px 0; overflow: hidden; }
        #water-fill { height: 100%; width: 0%; background: var(--water); transition: 0.5s; }
        .water-grid { display: flex; justify-content: space-around; margin-top: 10px; background: rgba(112, 161, 255, 0.1); padding: 10px; border-radius: 15px; }
        .glass-icon { font-size: 1.5rem; cursor: pointer; filter: grayscale(1); }
        .glass-icon.drank { filter: grayscale(0); transform: scale(1.2); }

        .special { color: #eb4d4b; font-weight: 700; }
        .abib-special { color: #2ecc71; font-weight: 800; }
        .note { font-size: 0.7rem; color: #95a5a6; display: block; margin-left: 37px; margin-top: -12px; margin-bottom: 10px; }
        .btn-reset { width: 100%; padding: 20px; border-radius: 25px; border: none; background: #2d3436; color: white; font-weight: 800; margin: 40px 0; cursor: pointer; }
    </style>
</head>
<body>

<button class="dark-toggle" onclick="document.body.classList.toggle('dark-mode')">üåì</button>

<div class="container">
    <header>
        <div id="greeting">Halo, Naila! ‚ú®</div>
        <h1>Glow Up Planner</h1>
        <div class="progress-box">
            <div class="progress-bg"><div id="progress-bar"></div></div>
            <div style="font-size: 0.75rem; margin-top: 10px; font-weight: 800;">Progress: <span id="progress-percent">0%</span></div>
        </div>
    </header>

    <div class="smart-row">
        <div class="info-box">
            <b>Skin Condition ‚òÄÔ∏è</b>
            <span id="skin-advice">Pilih kondisi kulitmu.</span>
        </div>
        <div class="info-box">
            <b>Next Step ‚è≠Ô∏è</b>
            <span id="next-step-text">Cleanser</span>
        </div>
    </div>

    <div class="widget-card" style="text-align: center;">
        <span class="stat-label" style="font-size: 0.7rem;">Kondisi kulit harian:</span>
        <div style="display:flex; gap:5px; justify-content:center; margin-top:10px;">
            <button onclick="setSkin('Oily')" style="padding:8px; border-radius:10px; border:1px solid #ddd; font-size:0.65rem; cursor:pointer; background:white;">Berminyak</button>
            <button onclick="setSkin('Dry')" style="padding:8px; border-radius:10px; border:1px solid #ddd; font-size:0.65rem; cursor:pointer; background:white;">Kering</button>
            <button onclick="setSkin('Healthy')" style="padding:8px; border-radius:10px; border:1px solid #ddd; font-size:0.65rem; cursor:pointer; background:white;">Sehat</button>
        </div>
    </div>

    <div class="widget-card">
        <span class="stat-label" style="font-weight:800; color:var(--accent);">üìÖ PRODUCT INVENTORY</span>
        <div style="margin-top:10px;">
            <input type="text" id="exp-prod-name" placeholder="Nama Produk (Mis: Toner)">
            <input type="date" id="exp-prod-date">
            <button class="btn-add" style="background:var(--accent);" onclick="addInventory()">Simpan Tanggal Exp</button>
        </div>
        <div id="inventory-list"></div>
    </div>

    <div class="widget-card">
        <span class="stat-label" style="font-weight:800; color:var(--primary);">üõí BUDGET TRACKER</span>
        <div style="margin-top:10px;">
            <input type="text" id="bud-prod-name" placeholder="Nama Produk">
            <input type="number" id="bud-prod-price" placeholder="Harga (Rp)">
            <button class="btn-add" onclick="addBudget()">Simpan ke Budget</button>
        </div>
        <div id="budget-list"></div>
    </div>

    <div class="widget-card" style="text-align:center;">
        <span class="stat-label">üíß Water Intake</span>
        <div class="water-progress"><div id="water-fill"></div></div>
        <div class="water-grid">
            <span class="glass-icon" onclick="drink(1)">ü•õ</span><span class="glass-icon" onclick="drink(2)">ü•õ</span><span class="glass-icon" onclick="drink(3)">ü•õ</span><span class="glass-icon" onclick="drink(4)">ü•õ</span>
            <span class="glass-icon" onclick="drink(5)">ü•õ</span><span class="glass-icon" onclick="drink(6)">ü•õ</span><span class="glass-icon" onclick="drink(7)">ü•õ</span><span class="glass-icon" onclick="drink(8)">ü•õ</span>
        </div>
    </div>

    <span class="section-tag">‚òÄÔ∏è MORNING ROUTINE</span>
    <div class="card">
        <ul id="am-list">
            <li class="task" data-id="am-1"><div class="checkbox"></div><span>Cleanser</span></li>
            <li class="task" data-id="am-2"><div class="checkbox"></div><span>Toner</span></li>
            <li class="task" data-id="am-3"><div class="checkbox"></div><span class="special">Vitamin C Serum</span></li>
            <li class="task" data-id="am-4"><div class="checkbox"></div><span>Moisturizer</span></li>
            <li class="task" data-id="am-5"><div class="checkbox"></div><span>Sunscreen ‚òÄÔ∏è</span></li>
        </ul>
    </div>

    <span class="section-tag">üåô NIGHT ROUTINE</span>
    <div id="night-cards"></div>

    <button class="btn-reset" onclick="resetApp()">Mulai Hari Baru ‚ú®</button>
</div>

<script>
    const schedule = [
        { d: "SENIN", items: ["Micellar", "Cleanser", "Toner", {n: "Abib Collagen Eye Patch üåø", s:2, c: "Tempel 15-20 mnt"}, {n: "Serum BHA 2%", s:1}, {n: "5X Ceramide Serum", s:1}, "Moisturizer"] },
        { d: "SELASA", items: ["Micellar", "Cleanser", "Toner", {n: "5X Ceramide Serum", s:1}, "Moisturizer", {n: "Acne spot", s:1}] },
        { d: "RABU", items: ["Micellar", "Cleanser", {n: "Exfoliasi", s:1, c: "1-5 Menit"}, "Toner calming", {n: "Abib Collagen Eye Patch üåø", s:2, c: "Deep Hydration"}, {n: "5X Ceramide Serum", s:1}, "Moisturizer"] },
        { d: "KAMIS", items: ["Micellar", "Cleanser", "Toner", {n: "Serum BHA 2%", s:1}, {n: "5X Ceramide Serum", s:1}, "Moisturizer"] },
        { d: "JUMAT", items: ["Micellar", "Cleanser", {n: "Masker Wajah", s:1, c: "15-20 Menit"}, {n: "Abib Collagen Eye Patch üåø", s:2, c: "Gunakan bersama masker"}, "Toner", {n: "5X Ceramide Serum", s:1}, "Moisturizer"] },
        { d: "SABTU", items: ["Micellar", "Cleanser", "Toner", {n: "5X Ceramide Serum", s:1}, "Moisturizer", {n: "Acne spot", s:1}] },
        { d: "MINGGU", items: ["Micellar", "Cleanser", {n: "Exfoliasi", s:1, c: "1-5 Menit"}, "Toner calming", {n: "5X Ceramide Serum", s:1}, "Moisturizer"] }
    ];

    function setSkin(type) {
        let advice = type === 'Oily' ? "Fokus Double Cleansing." : (type === 'Dry' ? "Pakai Moisturizer lebih." : "Kulit sehat! Mantap Naila.");
        document.getElementById('skin-advice').innerText = advice;
    }

    // INVENTORY & EXPIRED
    function addInventory() {
        const name = document.getElementById('exp-prod-name').value;
        const date = document.getElementById('exp-prod-date').value;
        if(!name || !date) return;
        const data = JSON.parse(localStorage.getItem('naila_inv') || '[]');
        data.push({ id: Date.now(), name, date });
        localStorage.setItem('naila_inv', JSON.stringify(data));
        document.getElementById('exp-prod-name').value = '';
        document.getElementById('exp-prod-date').value = '';
        renderInventory();
    }

    function deleteInv(id) {
        let data = JSON.parse(localStorage.getItem('naila_inv') || '[]');
        data = data.filter(i => i.id !== id);
        localStorage.setItem('naila_inv', JSON.stringify(data));
        renderInventory();
    }

    function renderInventory() {
        const list = document.getElementById('inventory-list');
        const data = JSON.parse(localStorage.getItem('naila_inv') || '[]');
        const today = new Date().toISOString().split('T')[0];
        list.innerHTML = data.map(i => {
            const isExp = i.date < today;
            return `<div class="list-item">
                <div><b>${i.name}</b><br><span class="exp-tag ${isExp ? 'exp-alert' : 'exp-ok'}">${isExp ? 'EXPIRED' : 'Exp: '+i.date}</span></div>
                <span class="del-btn" onclick="deleteInv(${i.id})">‚úï</span>
            </div>`;
        }).join('');
    }

    // BUDGET
    function addBudget() {
        const name = document.getElementById('bud-prod-name').value;
        const price = document.getElementById('bud-prod-price').value;
        if(!name || !price) return;
        const data = JSON.parse(localStorage.getItem('naila_bud_v5') || '[]');
        data.push({ id: Date.now(), name, price });
        localStorage.setItem('naila_bud_v5', JSON.stringify(data));
        document.getElementById('bud-prod-name').value = '';
        document.getElementById('bud-prod-price').value = '';
        renderBudget();
    }

    function deleteBud(id) {
        let data = JSON.parse(localStorage.getItem('naila_bud_v5') || '[]');
        data = data.filter(i => i.id !== id);
        localStorage.setItem('naila_bud_v5', JSON.stringify(data));
        renderBudget();
    }

    function renderBudget() {
        const list = document.getElementById('budget-list');
        const data = JSON.parse(localStorage.getItem('naila_bud_v5') || '[]');
        list.innerHTML = data.map(i => `<div class="list-item">
            <span><b>${i.name}</b><br>Rp${parseInt(i.price).toLocaleString()}</span>
            <span class="del-btn" onclick="deleteBud(${i.id})">‚úï</span>
        </div>`).join('');
    }

    function drink(n) {
        const glasses = document.querySelectorAll('.glass-icon');
        let drank = 0;
        for(let i=0; i<8; i++) {
            if(i < n) { glasses[i].classList.add('drank'); localStorage.setItem('w-'+i, 'done'); drank++; }
            else { glasses[i].classList.remove('drank'); localStorage.removeItem('w-'+i); }
        }
        document.getElementById('water-fill').style.width = (drank/8)*100 + '%';
    }

    function updateStats() {
        const all = document.querySelectorAll('.task').length;
        const done = document.querySelectorAll('.task.checked').length;
        const pct = Math.round((done / all) * 100);
        document.getElementById('progress-bar').style.width = pct + '%';
        document.getElementById('progress-percent').innerText = pct + '%';
        const next = document.querySelector('.task:not(.checked)');
        document.getElementById('next-step-text').innerText = next ? next.querySelector('span').innerText : "Selesai! ‚ú®";
        if(pct === 100) confetti({ particleCount: 100, spread: 70 });
    }

    const nightContainer = document.getElementById('night-cards');
    schedule.forEach((day, dIdx) => {
        const card = document.createElement('div');
        card.className = 'card';
        let itemsHtml = day.items.map((it, iIdx) => {
            const name = typeof it === 'string' ? it : it.n;
            const isSp = it.s === 1 ? 'special' : (it.s === 2 ? 'abib-special' : '');
            const note = it.c ? `<span class="note">${it.c}</span>` : '';
            return `<li class="task" data-id="task-${dIdx}-${iIdx}"><div class="checkbox"></div><span>${name}</span></li>${note}`;
        }).join('');
        card.innerHTML = `<span style="font-weight:800; display:block; margin-bottom:15px;">${day.d}</span><ul>${itemsHtml}</ul>`;
        nightContainer.appendChild(card);
    });

    document.addEventListener('click', (e) => {
        const li = e.target.closest('.task');
        if (li) {
            li.classList.toggle('checked');
            localStorage.setItem(li.getAttribute('data-id'), li.classList.contains('checked') ? 'done' : 'not');
            updateStats();
        }
    });

    window.onload = () => {
        renderBudget(); renderInventory();
        document.querySelectorAll('.task').forEach(li => {
            if (localStorage.getItem(li.getAttribute('data-id')) === 'done') li.classList.add('checked');
        });
        updateStats();
    };

    function resetApp() {
        if(confirm('Mulai hari baru?')) {
            document.querySelectorAll('.task').forEach(t => localStorage.removeItem(t.getAttribute('data-id')));
            location.reload();
        }
    }
</script>
</body>
</html>
